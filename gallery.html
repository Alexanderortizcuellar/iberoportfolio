<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gallery — Alexander Ortiz</title>
    <meta
      name="description"
      content="Projects by Alexander Ortiz — gallery with search and filters"
    />
    <style>
      :root {
        --bg: #0f1724;
        --card: #0b1a2a;
        --muted: #9aa7b2;
        --accent: #6ee7b7;
        --accent-2: #60a5fa;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: Inter, system-ui, Segoe UI, Roboto, Arial;
        background: linear-gradient(180deg, #071428 0%, var(--bg) 100%);
        color: #e6eef6;
      }
      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 28px;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .logo {
        width: 44px;
        height: 44px;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: #052026;
      }
      nav {
        display: flex;
        gap: 12px;
      }
      nav a {
        color: var(--muted);
        text-decoration: none;
        padding: 8px;
        border-radius: 8px;
      }
      nav a:hover,
      nav a.active {
        background: rgba(255, 255, 255, 0.04);
        color: #fff;
      }

      /* mobile nav hidden by default */
      .mobile-nav {
        display: none;
      }
      .menu-toggle {
        display: none;
        background: none;
        border: 0;
        color: var(--muted);
        font-size: 20px;
      }

      .controls {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-top: 18px;
        margin-bottom: 14px;
      }
      .search {
        flex: 1;
      }
      input[type="search"] {
        width: 100%;
        min-width: 135px;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: transparent;
        color: inherit;
      }

      .filters {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      /* Improved chip styles */
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 999px;
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.06);
        color: var(--muted);
        font-weight: 600;
        font-size: 13px;
        cursor: pointer;
        transition: transform 0.18s cubic-bezier(0.2, 0.9, 0.23, 1),
          box-shadow 0.18s ease, background 0.18s ease, color 0.18s ease,
          border-color 0.18s ease;
        user-select: none;
        --chip-glow: 0 6px 18px rgba(6, 15, 25, 0.45);
      }
      .chip:hover {
        transform: translateY(-3px);
        box-shadow: var(--chip-glow);
      }
      .chip:active {
        transform: translateY(-1px);
      }
      .chip:focus {
        outline: 3px solid rgba(110, 231, 183, 0.12);
        outline-offset: 3px;
      }

      /* selected state */
      .chip.active {
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        color: #052026;
        border-color: transparent;
        box-shadow: 0 12px 30px rgba(14, 103, 92, 0.12);
        transform: translateY(-4px);
      }

      /* optional check icon */
      .chip .check {
        width: 14px;
        height: 14px;
        border-radius: 3px;
        display: inline-grid;
        place-items: center;
        font-size: 11px;
        opacity: 0;
        transform: scale(0.85);
        transition: opacity 0.18s ease, transform 0.18s ease;
      }
      .chip.active .check {
        opacity: 1;
        transform: scale(1);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
      }
      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.01)
        );
        padding: 16px;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(2, 6, 23, 0.6);
        transition: transform 0.18s ease, box-shadow 0.18s ease,
          opacity 0.18s ease;
      }
      .card:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(2, 6, 23, 0.7);
      }
      .card h4 {
        margin: 0 0 6px 0;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
      }
      .stacks {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
        margin-top: 12px;
      }
      .stack {
        font-size: 12px;
        background: rgba(255, 255, 255, 0.03);
        padding: 6px 8px;
        border-radius: 999px;
        color: var(--muted);
      }

      .controls-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
      }

      .hidden {
        opacity: 0;
        transform: scale(0.98);
        pointer-events: none;
        height: 0;
        padding: 0;
        margin: 0;
      }

      @media (max-width: 980px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
        nav {
          display: none;
        }
        .menu-toggle {
          display: inline-block;
        }
        .mobile-nav.open {
          display: block;
          margin-top: 12px;
        }
      }
      @media (max-width: 640px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      /* simple modal */
      .modal {
        position: fixed;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(2, 6, 23, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }
      .modal.open {
        opacity: 1;
        pointer-events: auto;
      }
      .modal .dialog {
        background: var(--card);
        padding: 18px;
        border-radius: 12px;
        max-width: 820px;
        width: 100%;
        box-shadow: 0 12px 40px rgba(1, 6, 12, 0.8);
      }
      .modal .dialog h3 {
        margin-top: 0;
      }
      .close {
        float: right;
        background: transparent;
        border: 0;
        color: var(--muted);
        font-size: 18px;
        cursor: pointer;
      }

      /* helper for small screens */
      @media (max-width: 520px) {
        .controls {
          flex-direction: column;
          align-items: stretch;
        }
        .filters {
          justify-content: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="brand">
          <div class="logo">AO</div>
          <div>
            <div style="font-weight: 700">Alexander Ortiz</div>
            <div style="font-size: 12px; color: var(--muted)">
              Projects & Gallery
            </div>
          </div>
        </div>
        <div>
          <button
            class="menu-toggle"
            aria-expanded="false"
            aria-controls="mobile-nav"
          >
            ☰
          </button>
          <nav>
            <a href=".">Home</a>
            <a href="about.html">About</a>
            <a href="gallery.html" class="active">Gallery</a>
            <a href="contact.html">Contact</a>
          </nav>
        </div>
      </header>

      <div class="controls">
        <div class="search">
          <input
            id="search"
            type="search"
            placeholder="Search projects (name, summary, stack)..."
          />
        </div>
        <div
          id="filterContainer"
          class="filters"
          aria-label="Project filters"
        ></div>
      </div>

      <div id="grid" class="grid" aria-live="polite"></div>

      <div class="controls-bottom muted">
        Showing <span id="count"></span> projects
      </div>
    </div>

    <!-- modal for project details -->
    <div
      id="modal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
    >
      <div class="dialog" role="document">
        <button class="close" id="closeModal">✕</button>
        <h3 id="modalTitle"></h3>
        <div id="modalBody" class="muted"></div>
        <div id="modalLinks" style="margin-top: 12px"></div>
      </div>
    </div>

    <script>
      // Projects seeded from your resume file. (derived from your resume.json).
      // Source: resume.json. fileciteturn1file0
      const projects = [
        {
          name: "Chrome DevTools Protocol Desktop Client",
          summary:
            "PyQt5 GUI for CDP with predefined commands, command editor, and live execution.",
          highlights: [
            "Target discovery/attach, JSON viewer, response timing, and saved sessions.",
            "Schema-driven autocomplete for methods/params.",
          ],
          stack: ["Python", "PyQt5", "WebSockets (CDP)", "asyncio"],
          featured: true,
          repo_url: "",
        },
        {
          name: "Cattle Management App",
          summary:
            "Full-stack herd management: React front end + Supabase backend.",
          highlights: [
            "Tracks animals, weights, health events, and breeding cycles;",
            "Auth, row-level security, CSV import/export.",
          ],
          stack: ["React", "Supabase (Postgres)", "SQL"],
          featured: true,
          repo_url: "",
          live_url: "",
        },
        {
          name: "Chess Desktop Suite",
          summary:
            "Play positions, load/edit FEN/PGN, run engine analysis, and search PGN DBs via CQL.",
          highlights: [
            "Async engine integration (UCI) and fast CQL search over large databases.",
          ],
          stack: ["Python", "PyQt5", "UCI engines", "CQL"],
          featured: true,
          repo_url: "",
        },
        {
          name: "WordSearch: Generator · Solver · Game",
          summary: "Algorithmic generator, instant solver, and playable UI.",
          highlights: [
            "Backtracking generator with difficulty levels; multilingual support;",
            "PNG/PDF exports and seeded reproducibility.",
          ],
          stack: ["Python", "PyQt5"],
          featured: false,
          repo_url: "",
        },
        {
          name: "Chess Puzzles Web App",
          summary: "Web app for solving chess puzzles with ChessGround.",
          highlights: [
            "Step/hint controls, legal-move validation, and FEN/PGN import.",
          ],
          stack: ["JavaScript", "ChessGround"],
          featured: false,
          repo_url: "",
          live_url: "",
        },
        {
          name: "Cattle CRUD API",
          summary:
            "Service layer for cattle data with normalized schema and JWT auth.",
          highlights: [
            "Pagination, validation, and audit logging; designed for multiple clients.",
          ],
          stack: ["Node.js", "Express", "Postgres"],
          featured: false,
          repo_url: "",
        },
      ];

      // Read any manual project markup added to the page. To add a project manually in HTML,
      // create a <div class="project-data" data-name="..." data-summary="..." data-stack="Python,Flask" data-tags="..." data-repo="..." data-live="..."></div>
      // The script below will pick it up and include it in the gallery automatically.
      document.querySelectorAll(".project-data").forEach((el) => {
        const p = {
          name: el.dataset.name || el.getAttribute("data-name") || "Untitled",
          summary: el.dataset.summary || el.getAttribute("data-summary") || "",
          stack: (el.dataset.stack || el.getAttribute("data-stack") || "")
            .split(",")
            .map((s) => s.trim())
            .filter(Boolean),
          highlights: (
            el.dataset.highlights ||
            el.getAttribute("data-highlights") ||
            ""
          )
            .split("|")
            .map((s) => s.trim())
            .filter(Boolean),
          featured: el.dataset.featured === "true",
          repo_url: el.dataset.repo || el.getAttribute("data-repo") || "",
          live_url: el.dataset.live || el.getAttribute("data-live") || "",
        };
        projects.push(p);
      });

      // Build filter chips from stacks
      const filterContainer = document.getElementById("filterContainer");
      const allStacks = new Set();
      projects.forEach((p) => p.stack.forEach((s) => allStacks.add(s)));
      const stacks = Array.from(allStacks).sort((a, b) => a.localeCompare(b));
      stacks.forEach((s) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "chip";
        btn.textContent = s;
        btn.dataset.stack = s;
        btn.setAttribute("aria-pressed", "false");
        btn.addEventListener("click", () => {
          const active = btn.classList.toggle("active");
          btn.setAttribute("aria-pressed", String(active));
          applyFilters();
        });

        // add a small visual check element
        const check = document.createElement("span");
        check.className = "check";
        check.innerHTML = "✓";
        btn.prepend(check);

        filterContainer.appendChild(btn);
      });

      // render
      const grid = document.getElementById("grid");
      const search = document.getElementById("search");
      const count = document.getElementById("count");

      function createCard(p) {
        const el = document.createElement("article");
        el.className = "card project-card";
        el.dataset.stack = p.stack.join(",");

        el.innerHTML = `
        <h4>${escapeHtml(p.name)}</h4>
        <div class="muted">${escapeHtml(p.summary)}</div>
        <div class="stacks">${p.stack
          .map((s) => `<span class="stack">${escapeHtml(s)}</span>`)
          .join("")}</div>
        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
          <button class="btn-more" data-name="${escapeHtml(
            p.name
          )}">More</button>
          ${
            p.live_url
              ? `<a class="muted" href="${p.live_url}" target="_blank">Live</a>`
              : ""
          }
          ${
            p.repo_url
              ? `<a class="muted" href="${p.repo_url}" target="_blank">Repo</a>`
              : ""
          }
        </div>
      `;

        el.querySelector(".btn-more").addEventListener("click", () =>
          openModal(p)
        );
        return el;
      }

      function render(list) {
        grid.innerHTML = "";
        if (list.length === 0) {
          grid.innerHTML =
            '<div class="muted">No projects match your filters.</div>';
          count.textContent = "0";
          return;
        }
        list.forEach((p) => grid.appendChild(createCard(p)));
        count.textContent = list.length;
      }

      function getActiveStacks() {
        return Array.from(document.querySelectorAll(".chip.active")).map(
          (b) => b.dataset.stack
        );
      }

      function applyFilters() {
        const q = search.value.trim().toLowerCase();
        const activeStacks = getActiveStacks();
        const filtered = projects.filter((p) => {
          // search in name, summary, stack
          const text = (
            p.name +
            " " +
            p.summary +
            " " +
            p.stack.join(" ")
          ).toLowerCase();
          if (q && !text.includes(q)) return false;
          if (activeStacks.length > 0) {
            // require project to include ALL active stacks (you can change to ANY/OR behavior below)
            return activeStacks.every((s) =>
              p.stack.map((x) => x.toLowerCase()).includes(s.toLowerCase())
            );
          }
          return true;
        });
        render(filtered);
      }

      search.addEventListener("input", () => applyFilters());

      // Modal
      const modal = document.getElementById("modal");
      const modalTitle = document.getElementById("modalTitle");
      const modalBody = document.getElementById("modalBody");
      const modalLinks = document.getElementById("modalLinks");
      document
        .getElementById("closeModal")
        .addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closeModal();
      });

      function openModal(p) {
        modalTitle.textContent = p.name;
        modalBody.innerHTML =
          `<p class="muted">${escapeHtml(p.summary)}</p>` +
          (p.highlights && p.highlights.length
            ? "<ul>" +
              p.highlights
                .map((h) => `<li class="muted">${escapeHtml(h)}</li>`)
                .join("") +
              "</ul>"
            : "");
        modalLinks.innerHTML = "";
        if (p.live_url)
          modalLinks.innerHTML += `<a class="chip" href="${p.live_url}" target="_blank">Open live</a> `;
        if (p.repo_url)
          modalLinks.innerHTML += `<a class="chip" href="${p.repo_url}" target="_blank">View repo</a>`;
        modal.classList.add("open");
        modal.setAttribute("aria-hidden", "false");
      }
      function closeModal() {
        modal.classList.remove("open");
        modal.setAttribute("aria-hidden", "true");
      }

      // initial render
      render(projects);

      // small helper
      function escapeHtml(s) {
        return String(s || "").replace(/[&<>"']/g, function (c) {
          return {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
          }[c];
        });
      }

      // create mobile nav + toggle behaviour (same as index/about/contact)
      const toggle = document.querySelector(".menu-toggle");
      const mobileNav = document.createElement("div");
      mobileNav.id = "mobile-nav";
      mobileNav.className = "mobile-nav";
      mobileNav.innerHTML = `
      <nav style="display:flex;flex-direction:column;gap:8px">
        <a href=".">Home</a>
        <a href="about.html">About</a>
        <a href="gallery.html">Gallery</a>
        <a href="contact.html">Contact</a>
      </nav>
    `;
      document
        .querySelector(".container")
        .insertBefore(mobileNav, document.querySelector(".controls"));

      toggle.addEventListener("click", () => {
        const open = mobileNav.classList.toggle("open");
        toggle.setAttribute("aria-expanded", String(open));
      });

      // highlight current link (works for both navs)
      function highlightLinks() {
        const links = document.querySelectorAll("nav a");
        links.forEach((a) => {
          try {
            const href = a.getAttribute("href");
            if (
              (href === "/" &&
                (location.pathname === "/" ||
                  location.pathname.endsWith("/index.html"))) ||
              location.pathname.endsWith(href)
            ) {
              a.classList.add("active");
            } else {
              a.classList.remove("active");
            }
          } catch (e) {}
        });
      }
      highlightLinks();

      // Convenience: allow adding new project cards by dropping HTML with class "project-data" before the script runs.
      // The script already picks them up above and appends them to the projects array.
    </script>
  </body>
</html>
